<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MP3 Record + Slider</title>
  <style>
    body { font-family: system-ui, sans-serif; padding: 16px; }
    button { margin-right: 8px; margin-bottom: 8px; }

    /* 로그 상자: 최대 800px + 긴 토큰 줄바꿈 처리 + 연한 회색 배경 */
    #logArea {
      margin-top: 12px;
      white-space: pre-wrap;         /* \n 유지 + 일반 줄바꿈 허용 */
      overflow-wrap: anywhere;       /* 공백 없는 긴 문자열도 줄바꿈 */
      word-break: break-word;        /* 일부 브라우저 호환 */
      line-break: anywhere;          /* CJK 등 줄바꿈 유연화 */
      overflow-x: hidden;            /* 가로 넘침 숨김 */
      font-size: 12px;
      color: #444;
      width: 100%;
      max-width: 800px;
      background-color: #f5f5f5;     /*  연한 회색 배경 */
    }

    /* 컨트롤 행: 버튼/레이블/숫자입력/슬라이더 등 */
    .control-row { margin: 10px 0 6px; display: flex; align-items: center; gap: 8px; flex-wrap: wrap; }

    /* 컨테이너: 슬라이더/경과표시가 같은 폭을 공유하도록 묶음 */
    .slider-container {
      min-width: 400px;
      max-width: 800px;
      width: 100%;
      margin-top: 8px;
    }

    /* 경과 시간(우측 정렬, 컨테이너 기준) */
    .slider-head {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      margin-top: 8px;
      font-size: 12px;
      color: #666;
    }
    .elapsed { min-width: 64px; text-align: right; }

    /* 슬라이더 행: 컨테이너 폭을 따르며 좌측 정렬 */
    .slider-wrap { display: flex; justify-content: flex-start; margin-top: 6px; }

    /* 슬라이더는 컨테이너 너비를 100% 사용 */
    #audioRecordSlider,
    #audioPlayerSlider { width: 100%; }

    /* 숫자 입력 폭 */
    #audioRecordTime { width: 120px; padding: 6px 8px; }


  /* 구분선(hr)을 컨테이너 폭에 맞게 정리 */
  .section-hr {
    max-width: 800px;
    width: 100%;
    margin: 16px 0;
    border: none;
    border-top: 1px solid #ddd;
  }


  </style>
</head>
<body>
  <h2>MP3 Recorder + Slider v0.96-h</h2>

  <!-- 버튼 박스 -->
  <div>
    <button id="startRecordButton">녹음 시작</button>
    <button id="stopRecordButton" disabled>녹음 중지</button>
    <br/>
    <button id="playButton" disabled>녹음된 오디오 재생</button>
    <button id="stopPlayButton" disabled>녹음된 오디오 재생중지</button>
    <button id="downloadButton" disabled>MP3 다운로드</button>
   </div>

  <!-- 구분선: 녹음 컨테이너 앞 -->
  <hr class="section-hr">
  <!-- 녹음 영역 -->
  <div id="audioRecordContainer" class="slider-container">
    <!-- 녹음 시간(초) -->
    <div class="control-row">
      <label for="audioRecordTime">녹음 시간(초) :</label>
      <input
        type="number"
        id="audioRecordTime"
        value="60"
        min="1"
        step="1"
        inputmode="numeric"
        autocomplete="off"
      />
    </div>

    <!-- 녹음 경과 (우측 상단) -->
    <div class="slider-head" aria-live="polite">
      <span>녹음 경과:&nbsp;</span>
      <span id="audioRecordElapsed" class="elapsed">0.0s</span>
    </div>

    <!-- 녹음 슬라이더 -->
    <div class="slider-wrap">
      <input
        type="range"
        id="audioRecordSlider"
        min="0"
        max="60"
        step="0.01"
        value="0"
        aria-label="녹음 진행률(초)"
      >
    </div>
  </div>

  <!-- 구분선: 재생 컨테이너 앞 -->
  <hr class="section-hr">
  <!-- 재생 영역 -->
  <div id="audioPlayerContainer" class="slider-container">
    <!-- 재생 시간/슬라이더 + Pause/Play -->
    <div class="control-row">
      <label for="audioPlayerSlider">재생 시간(초) :</label>
      <span id="audioPlayerTime" aria-live="polite">0</span>
      <button id="audioPauseButton" disabled>Pause</button>
      <button id="audioResumeButton" disabled>Play</button>
    </div>

    <!-- 재생 경과 (우측 상단) -->
    <div class="slider-head" aria-live="polite">
      <span>재생 경과:&nbsp;</span>
      <span id="audioPlayerElapsed" class="elapsed">0.0s</span>
    </div>

    <!-- 재생 슬라이더 -->
    <div class="slider-wrap">
      <input
        type="range"
        id="audioPlayerSlider"
        min="0"
        max="0"
        step="0.01"
        value="0"
        disabled
        aria-label="재생 진행률(초)"
      >
    </div>
  </div>

  <!-- 로그 박스 -->
  <div id="logArea"></div>
 
  <!-- MP3 인코딩용 lamejs (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/lamejs/1.2.1/lame.min.js"></script>

  <!-- 녹음/인코딩/업로드/슬라이더 로직 -->
  <script src="audioSlider.js?v=0.96-h" defer></script>
</body>
</html>
